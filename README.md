# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

# Архитиктура приложения MVP (Model-View-Presenter)
- Model:  отвечает за хранение данных и их изменение
- View: отвечает за отображение данных для пользователя
- Presenter: обеспечивает связь между  model и view

## Api
Класс Api нужен для работы с запросами к серверу

- handleResponse: обрабатывает ответ от сервера, в случае успеха возрващает данные
- get: выполняет GET запрос, затем обрабатывает ответ через handleresponse
- post: выполняет POST запрос, затем обрабатывается ответ через handleresponse

## EventEmitter
Брокер сообщений, устанавливает, вызывает и снимает слушатели событий

- on: добавляет новый обработчик к указанному событию. Если для этого события еще нет подписчиков, создается новая коллекция
- off: удаляет указанный обработчик из списка подписчиков конкретного события. Если после удаления обработчиков список 
становится пустым, удаляется вся запись о событии
- emit: инициирует событие, вызывая всех подписчиков, связанных с этим событием
- onAll: подписывается на все события через глобальный обработчик
- offAll: полностью очищает все зарегистрированные обработчики
- trigger: возвращает функцию, которая инициирует указанное событие при своем вызове.

# Model:

## ApiModel 
взаимодействует с данными на сервере

- getProductList: отвечает за  получение карточек 
- postOrder отвечает за ответ по заказу

## Basket
Сохраняет и взаимодействует с данными от пользователя 

- addProductToBasket: добавляет товар в корзину
- deleteProductToBasket: удаляет товар из корзины
- clearBasket: очищает всю корзину
- basketCounter: считает количество товара в корзине
- totalPriceProducts: считает общую стоимость в корзине

## PayForm
Хранит данные пользователя 

- validateOrder: валидация адреса и выбора оплаты
- validateContactInfo: валидация контактной информации 
- setAddress(: устанавливает адресс пользователя
- setContact: устанавливает контактные данные пользователя 
- getPurchasedOrder: возвращает объект данных пользователя с выбранными товарами

# View

## Cards
отвечает за отображение карточек пользователю 

- displayCard: возвращает карточку 
- setText: возвращает текстовое содержимое элементу
- setPrice: возвращает цену продукта

## Basket
отвечает за отображение корзины пользователю

- displayBasket: возвращает корзину
- displayBasketCount: устанавливает количество товаров в корзине 
- displayBasketSum: устанавливает сумму стоимостей всех товаров в корзине

## Order
отвечает за отображение окна заказа

- displayOrder: возвращает окно заказа
- paymentChoice: выделяет кнопку выбора оплаты

## ContactInfo
отвечает за отображение окна контактной информации пользователя

- displayContact: возвращает окно контактной информации

## Success
отвечает за отображение окна успешного заказа

- displaySuccess: возвращает успешный ответ и количество списанной валюты

## Modal
отвечает за отображение модальных окон

- open: открывает 
- close: закрывает 